---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { Image } from 'astro:assets';
import backgroundImage from '../assets/children-hero.jpg';
import waterImage from '../assets/img/icons8-water-64.png';
import environmentImage from '../assets/img/about-2.jpg';
import educationImage from '../assets/img/courses-3.jpg';
import vocationalImage from '../assets/img/courses-1.jpg';
import protectionImage from '../assets/img/gallery1.jpg';
import sponsorshipImage from '../assets/img/home1.jpg';

// Mock project data with proper typing
interface Project {
  id: number;
  title: string;
  description: string;
  goal?: number;
  raised?: number;
  image: string;
  percentage?: number;
  status: 'completed' | 'in_progress' | 'planned';
}

const projects: Project[] = [
  {
    id: 1,
    title: "Clean Water Access Initiative",
    description: "Drilling boreholes and installing water purification systems to provide sustainable clean water access to over 500 households in Migori communities.",
    image: waterImage.src,
    status: "completed"
  },
  {
    id: 2,
    title: "Environmental Conservation Project",
    description: "Large-scale tree planting and reforestation initiatives covering 50 hectares of degraded land to combat climate change and restore biodiversity.",
    goal: 25000,
    raised: 18750,
    image: environmentImage.src,
    percentage: 0,
    status: "in_progress"
  },
  {
    id: 3,
    title: "Girls' Education & Empowerment Program",
    description: "Comprehensive education support program providing scholarships, mentorship, and life skills training to 200 girls in secondary school.",
    goal: 15000,
    raised: 11200,
    image: educationImage.src,
    percentage: 0,
    status: "in_progress"
  },
  {
    id: 4,
    title: "Vocational Skills Training Center",
    description: "Establishing a modern vocational training facility offering courses in carpentry, tailoring, ICT, and entrepreneurship for youth employment.",
    goal: 35000,
    raised: 21000,
    image: vocationalImage.src,
    percentage: 0,
    status: "in_progress"
  },
  {
    id: 5,
    title: "Child Protection & Welfare Network",
    description: "Creating a comprehensive child protection system with community-based child protection committees and emergency response mechanisms.",
    image: protectionImage.src,
    status: "planned"
  },
  {
    id: 6,
    title: "Orphan Sponsorship Program Expansion",
    description: "Scaling up our orphan sponsorship program to support 300 additional children with education, healthcare, and nutritional needs.",
    goal: 45000,
    raised: 18000,
    image: sponsorshipImage.src,
    percentage: 0,
    status: "in_progress"
  }
];

// Calculate progress percentage for in-progress projects
projects.forEach(project => {
  if (project.status === 'in_progress' && project.goal && project.raised) {
    project.percentage = Math.min((project.raised / project.goal) * 100, 100);
  }
});
---

<Layout title="Programs - Otacho Hands of Grace Community Care">
  <Header />
  <main>
    <!-- Page Header -->
    <section class="relative bg-black/50 text-white py-24 overflow-hidden">
      <div 
        class="absolute inset-0 bg-cover bg-center bg-no-repeat" 
        style={`background-image: url(${backgroundImage.src});`}
        aria-hidden="true"
      ></div>
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
        <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 animate-slide-up font-sans">Our Programs</h1>
        <p class="text-lg sm:text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto animate-slide-up" style="animation-delay: 0.2s;">
          Discover our comprehensive initiatives in water and sanitation, environmental sustainability, child protection, gender equality, orphan sponsorship, and vocational training across Migori communities.
        </p>
      </div>
    </section>

    <!-- Completed Projects -->
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12 animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Completed Initiatives</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Successful programs that have transformed lives and communities in Migori.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {projects.filter(project => project.status === 'completed').map((project) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-slide-up" style={`animation-delay: ${project.id * 0.1}s;`}>
              <!-- Project Image -->
              <div class="h-48 overflow-hidden">
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                />
              </div>
              <!-- Project Content -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-3">{project.title}</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                  {project.description}
                </p>
                <a 
                  href="/contact" 
                  class="w-full bg-gradient-to-r from-blue-600 to-blue-600 text-gray-100 px-6 py-3 rounded-lg font-semibold text-center hover:from-blue-400 hover:to-blue-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                  Learn More
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- In Progress Projects -->
    <section class="py-20 bg-white">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12 animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Active Programs</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Current initiatives making a difference in water access, education, and sustainable development.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {projects.filter(project => project.status === 'in_progress').map((project) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-slide-up" style={`animation-delay: ${project.id * 0.1}s;`}>
              <!-- Project Image -->
              <div class="h-48 overflow-hidden">
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                />
              </div>
              <!-- Project Content -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-3">{project.title}</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                  {project.description}
                </p>
                <!-- Progress Section -->
                <div class="mb-6">
                  <!-- Progress Bar -->
                  <div class="w-full bg-gray-200 rounded-full h-4 mb-3 border border-gray-300">
                    <div 
                      class="bg-gradient-to-r from-blue-600 to-blue-600 h-4 rounded-full transition-all duration-700 ease-out shadow-sm"
                      style={`width: ${project.percentage}%`}
                    ></div>
                  </div>
                  <!-- Progress Text -->
                  <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-600 font-medium">
                      ${project.raised!.toLocaleString()} of ${project.goal!.toLocaleString()} raised
                    </span>
                    <span class="text-gray-800 font-bold text-lg">
                      {Math.round(project.percentage!)}%
                    </span>
                  </div>
                </div>
                <!-- Donate Button -->
                <a 
                  href="/contact" 
                  class="w-full bg-gradient-to-r from-blue-600 to-blue-600 text-gray-100 px-6 py-3 rounded-lg font-semibold text-center hover:from-blue-300 hover:to-blue-300 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                  Donate Now
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Planned Projects -->
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12 animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Upcoming Initiatives</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Innovative programs planned to expand our impact in child protection and community development.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {projects.filter(project => project.status === 'planned').map((project) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-slide-up" style={`animation-delay: ${project.id * 0.1}s;`}>
              <!-- Project Image -->
              <div class="h-48 overflow-hidden">
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                />
              </div>
              <!-- Project Content -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-3">{project.title}</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                  {project.description}
                </p>
                <a 
                  href="/contact" 
                  class="w-full bg-gradient-to-r from-blue-600 to-blue-600 text-gray-100 px-6 py-3 rounded-lg font-semibold text-center hover:from-gray-300 hover:to-gray-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                  Support This Project
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="py-20 bg-white">
      <div class="container mx-auto px-6 text-center">
        <div class="max-w-3xl mx-auto animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Partner With Us</h2>
          <p class="text-xl text-gray-600 mb-8">
            Join Otacho Hands of Grace Community Care in our mission to create sustainable change through water access, environmental conservation, education, and community empowerment.
          </p>
          <a 
            href="/contact" 
            class="inline-block bg-gradient-to-r from-yellow-300 to-yellow-300 text-gray-900 px-8 py-4 rounded-full font-semibold text-lg hover:from-gray-100 hover:to-gray-100 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
          >
            Get Involved Today
          </a>
        </div>
      </div>
    </section>

    <!-- Custom CSS for Animations -->
    <style>
      .animate-pulse-slow {
        animation: pulse 8s ease-in-out infinite;
      }
      .animate-slide-up {
        opacity: 0;
        transform: translateY(20px);
        animation: slideUp 0.8s ease-out forwards;
      }
      @keyframes pulse {
        0%, 100% { opacity: 0.1; }
        50% { opacity: 0.15; }
      }
      @keyframes slideUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </main>
  <Footer />
</Layout>