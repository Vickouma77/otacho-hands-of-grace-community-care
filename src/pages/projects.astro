---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// Mock project data with proper typing
interface Project {
  id: number;
  title: string;
  description: string;
  goal?: number;
  raised?: number;
  image: string;
  percentage?: number;
  status: 'completed' | 'in_progress' | 'planned';
}

const projects: Project[] = [
  {
    id: 1,
    title: "New Classroom Building",
    description: "Constructed modern classrooms to accommodate growing educational needs, providing a conducive learning environment for our children.",
    image: "https://images.pexels.com/photos/8613089/pexels-photo-8613089.jpeg?auto=compress&cs=tinysrgb&w=800",
    status: "completed"
  },
  {
    id: 2,
    title: "Community Health Outreach",
    description: "Extending healthcare services to the Otacho community through mobile clinics and health education programs.",
    goal: 15000,
    raised: 8750,
    image: "https://images.pexels.com/photos/4386466/pexels-photo-4386466.jpeg?auto=compress&cs=tinysrgb&w=800",
    percentage: 0,
    status: "in_progress"
  },
  {
    id: 3,
    title: "Vocational Training Center",
    description: "Establishing a dedicated center to equip older children with vocational skills for sustainable careers.",
    goal: 8000,
    raised: 5200,
    image: "https://images.pexels.com/photos/8613089/pexels-photo-8613089.jpeg?auto=compress&cs=tinysrgb&w=800",
    percentage: 0,
    status: "in_progress"
  },
  {
    id: 4,
    title: "Community Garden Initiative",
    description: "Planning a sustainable garden to provide fresh produce and teach agricultural skills to the community.",
    image: "https://images.pexels.com/photos/8613089/pexels-photo-8613089.jpeg?auto=compress&cs=tinysrgb&w=800",
    status: "planned"
  }
];

// Calculate progress percentage for in-progress projects
projects.forEach(project => {
  if (project.status === 'in_progress' && project.goal && project.raised) {
    project.percentage = Math.min((project.raised / project.goal) * 100, 100);
  }
});
---

<Layout title="Projects - Otacho Christian Children Home">
  <Header />
  <main>
    <!-- Page Header -->
    <section class="relative bg-gradient-to-br from-gray-800 to-gray-900 text-white py-20 overflow-hidden">
      <div class="absolute inset-0 opacity-10 animate-pulse-slow">
        <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg%20width%3D%2280%22%20height%3D%2280%22%20viewBox%3D%220%200%2080%2080%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23ffffff%22%20fill-opacity%3D%220.15%22%3E%3Cpath%20d%3D%22M40%2010%20a%203%203%200%200%201%200%206%20a%203%203%200%200%201%200%20-6%20M40%2070%20a%203%203%200%200%201%200%206%20a%203%203%200%200%201%200%20-6%20M10%2040%20a%203%203%200%200%201%200%206%20a%203%203%200%200%201%200%20-6%20M70%2040%20a%203%203%200%200%201%200%206%20a%203%203%200%200%201%200%20-6%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
      </div>
      <div class="container mx-auto px-6 text-center relative z-10">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-6 animate-slide-up">Our Projects</h1>
        <p class="text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto animate-slide-up" style="animation-delay: 0.2s;">
          Explore our completed, ongoing, and planned initiatives to transform lives in the Otacho community.
        </p>
      </div>
    </section>

    <!-- Completed Projects -->
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12 animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Completed Projects</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Celebrate the initiatives we've successfully completed to support our children.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {projects.filter(project => project.status === 'completed').map((project) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-slide-up" style={`animation-delay: ${project.id * 0.1}s;`}>
              <!-- Project Image -->
              <div class="h-48 overflow-hidden">
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                />
              </div>
              <!-- Project Content -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-3">{project.title}</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                  {project.description}
                </p>
                <a 
                  href="/contact" 
                  class="w-full bg-gradient-to-r from-gray-200 to-gray-300 text-gray-900 px-6 py-3 rounded-lg font-semibold text-center hover:from-gray-300 hover:to-gray-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                  Learn More
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- In Progress Projects -->
    <section class="py-20 bg-white">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12 animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">In Progress Projects</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Support our ongoing initiatives to make a difference in children's lives.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {projects.filter(project => project.status === 'in_progress').map((project) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-slide-up" style={`animation-delay: ${project.id * 0.1}s;`}>
              <!-- Project Image -->
              <div class="h-48 overflow-hidden">
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                />
              </div>
              <!-- Project Content -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-3">{project.title}</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                  {project.description}
                </p>
                <!-- Progress Section -->
                <div class="mb-6">
                  <!-- Progress Bar -->
                  <div class="w-full bg-gray-200 rounded-full h-4 mb-3 border border-gray-300">
                    <div 
                      class="bg-gradient-to-r from-gray-600 to-gray-800 h-4 rounded-full transition-all duration-700 ease-out shadow-sm"
                      style={`width: ${project.percentage}%`}
                    ></div>
                  </div>
                  <!-- Progress Text -->
                  <div class="flex justify-between items-center text-sm">
                    <span class="text-gray-600 font-medium">
                      ${project.raised!.toLocaleString()} of ${project.goal!.toLocaleString()} raised
                    </span>
                    <span class="text-gray-800 font-bold text-lg">
                      {Math.round(project.percentage!)}%
                    </span>
                  </div>
                </div>
                <!-- Donate Button -->
                <a 
                  href="/contact" 
                  class="w-full bg-gradient-to-r from-gray-200 to-gray-300 text-gray-900 px-6 py-3 rounded-lg font-semibold text-center hover:from-gray-300 hover:to-gray-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                  Donate Now
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Planned Projects -->
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-6">
        <div class="text-center mb-12 animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Planned Projects</h2>
          <p class="text-xl text-gray-600 max-w-3xl mx-auto">
            Discover our upcoming initiatives to further empower our community.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {projects.filter(project => project.status === 'planned').map((project) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 animate-slide-up" style={`animation-delay: ${project.id * 0.1}s;`}>
              <!-- Project Image -->
              <div class="h-48 overflow-hidden">
                <img 
                  src={project.image} 
                  alt={project.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                />
              </div>
              <!-- Project Content -->
              <div class="p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-3">{project.title}</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                  {project.description}
                </p>
                <a 
                  href="/contact" 
                  class="w-full bg-gradient-to-r from-gray-200 to-gray-300 text-gray-900 px-6 py-3 rounded-lg font-semibold text-center hover:from-gray-300 hover:to-gray-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                >
                  Support This Project
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="py-20 bg-white">
      <div class="container mx-auto px-6 text-center">
        <div class="max-w-3xl mx-auto animate-slide-up">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Get Involved</h2>
          <p class="text-xl text-gray-600 mb-8">
            Your support can make a difference. Join us in our mission to transform lives through these impactful projects.
          </p>
          <a 
            href="/contact" 
            class="inline-block bg-gradient-to-r from-gray-200 to-gray-300 text-gray-900 px-8 py-4 rounded-full font-semibold text-lg hover:from-gray-300 hover:to-gray-400 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
          >
            Support Our Projects
          </a>
        </div>
      </div>
    </section>

    <!-- Custom CSS for Animations -->
    <style>
      .animate-pulse-slow {
        animation: pulse 8s ease-in-out infinite;
      }
      .animate-slide-up {
        opacity: 0;
        transform: translateY(20px);
        animation: slideUp 0.8s ease-out forwards;
      }
      @keyframes pulse {
        0%, 100% { opacity: 0.1; }
        50% { opacity: 0.15; }
      }
      @keyframes slideUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </main>
  <Footer />
</Layout>